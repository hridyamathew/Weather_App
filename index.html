<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather App</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <style>
      input {
        padding: 20px 40px;
        border: none;
        border-radius: 10px;
        width: 350px;
        height: 40px;
        color: #1583d7;
        background-color: #9accf2;
      }
      button {
        border: none;
        border-radius: 10px;
        width: 100px;
        height: 40px;
        background-color: #7fbeee;
        color: #0075cf;
        font-weight: bolder;
      }
      @media (max-width: 576px) {
        input {
          width: 220px;
        }
        button {
          width: 80px;
        }
      }
      .box {
        padding: 20px;
        background-color: #61b2f0;
        width: 250px;
        height: 120px;
        border-radius: 10px;
      }
    </style>
  </head>
  <body>
    <div
      style="
        min-height: 100vh;
        background: linear-gradient(to right, #54b1f8, #057edb);
      "
    >
      <div class="container">
        <div class="form-floating d-flex justify-content-center flex">
          <input
            id="city"
            class="mt-5"
            type="text"
            placeholder="enter location"
          />
          <button class="mt-5 ms-2 ms-md-3" onclick="check()">Search</button>
        </div>
        <div id="output" class="text-white">
          <div
            class="d-flex flex-column align-items-center justify-content-center mt-5 float"
          >
            <img src="snow.png" alt="" width="220px" />
            <h4 class="mt-5">Get the Weather Update . . .</h4>
          </div>
        </div>
      </div>
    </div>
  </body>

  <script>
    const getDateTime = () => {
      const localTime = new Date();
      const days = [
        "Sunday",
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
      ];
      let dayName = days[localTime.getDay()];
      let date = localTime.getDate();
      let year = localTime.getFullYear();
      const months = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ];
      let month = months[localTime.getMonth()];
      let day = `${dayName} ${month} ${date}, ${year}`;

      let hours = localTime.getHours();
      let minutes = localTime.getMinutes();
      let session = "AM";
      if (hours > 12) {
        session = "PM";
        hours = hours - 12;
      }
      if (hours < 10) {
        hours = "0" + hours;
      }
      if (minutes < 10) {
        minutes = "0" + minutes;
      }

      let time = `${hours}:${minutes} ${session}`;
      return [day, time];
    };

    const check = async () => {
      dateTime = getDateTime();
      console.log(dateTime[0]);

      let city = document.getElementById("city").value;
      try {
        const res = await fetch(
          `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=5b4bee0ba241d092159faf007e166080&&units=metric`
        );
        console.log(res);
        const result = await res.json();
        console.log(result);
        let temperature = result.main.temp;
        let humidity = result.main.humidity;
        let pressure = result.main.pressure;
        let wind_speed = result.wind.speed;
        console.log(temperature, humidity, pressure, wind_speed);
        console.log(result.weather[0].description);
        let iconURL = `https://openweathermap.org/img/wn/${result.weather[0].icon}@2x.png`;

        let output = document.getElementById("output");
        output.innerHTML = `<div class="d-flex flex-sm-column flex-md-row justify-content-center justify-content-md-between align-items-center flex-wrap">
                  <h1 class="mt-5">${result.name}</h1>
                  <div class="mt-2 mt-md-5">
                    <h4>${dateTime[0]}</h4>
                    <h4 class="float-md-end float-none text-center">${
                      dateTime[1]
                    }</h4>
                  </div>
                </div>
                <div style="height: 300px" class="d-flex align-items-center">
                  <img src="./day-and-night.png" alt="" width="160px" />
                  <h1 style="font-size: clamp(53px, 8vw, 80px);" class="ms-2 ms-md-4">${temperature}&deg;C</h1>
                </div>
                <div class="d-flex flex-sm-column flex-md-row justify-content-center justify-content-md-between align-items-center flex-wrap">
                  <div class=" box d-flex align-items-center justify-content-center m-3 m-md-0">
                    <img src="${iconURL}" alt="" width="50%" />
                    <h6>${result.weather[0].description.toUpperCase()}</h6>
                  </div>
                  <div class=" box d-flex align-items-center justify-content-center m-3 m-md-0">
                    <img src="./humidity.png" alt="" width="30%" />
                   <div class="d-flex flex-column align-items-center justify-content-center">
                    <h6>HUMIDITY</h6>
                    <h4>${humidity}%</h4>
                    </div>
                  </div>
                  <div class=" box d-flex align-items-center justify-content-center m-3 m-md-0 ">
                    <img src="./atmospheric.png" alt="" width="30%" />
                    <div class="d-flex flex-column align-items-center justify-content-center">
                    <h6>PRESSURE</h6>
                    <h4>${pressure} hPa</h4>
                    </div>
                  </div>
                  <div class=" box d-flex align-items-center justify-content-center mt-3 mt-md-0 mb-5 mb-md-5">
                    <img src="./wind.png" alt="" width="30%" />
                    <div class="d-flex flex-column align-items-center justify-content-center">
                    <h6>WIND</h6>
                    <h4>${wind_speed} m/s</h4>
                    </div>
                  </div>
                </div>`;
      } catch (error) {
        output.innerHTML = ` <div
            class="d-flex flex-column align-items-center justify-content-center mt-5 float"
          >
            <img src="snow.png" alt="" width="220px" />
            <h4 class="mt-5">Get the Weather Update . . .</h4>
          </div>`;
        alert("Location not found ... ");
      }
    };
  </script>
</html>
